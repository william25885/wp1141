# Phase 6 測試指南：搜尋、篩選與數據分析

本階段目標是實作對話列表的搜尋與篩選功能，以及建立數據分析頁面。

## 1. 測試環境準備

1. 確保開發伺服器正在執行：
   ```bash
   yarn dev
   ```
2. 確保資料庫中有測試資料（若無，請執行 `yarn seed:test`）。
3. 登入後台：`http://localhost:3000/admin`。

## 2. 驗證對話列表搜尋與篩選 (/admin/conversations)

### 2.1 搜尋功能
1. 在對話列表頁面上方找到搜尋框。
2. 輸入一個存在的使用者 ID 或顯示名稱的部分字串（例如 "U123" 或 "小明"）。
3. 按下搜尋或 Enter 鍵。
4. **預期結果**：列表只顯示符合搜尋條件的對話。
5. 清除搜尋框，確認列表恢復顯示所有對話。

### 2.2 狀態篩選
1. 找到狀態篩選下拉選單。
2. 選擇 "READY" 狀態。
3. **預期結果**：列表只顯示狀態為 READY 的對話。
4. 選擇 "ASK_COUNTRY" 狀態。
5. **預期結果**：列表只顯示狀態為 ASK_COUNTRY 的對話。
6. 選擇 "全部狀態"。
7. **預期結果**：列表顯示所有對話。

### 2.3 複合查詢
1. 輸入搜尋關鍵字（例如 "U"）。
2. 同時選擇狀態篩選（例如 "READY"）。
3. **預期結果**：列表只顯示同時符合搜尋關鍵字且狀態為 READY 的對話。

## 3. 驗證數據分析頁面 (/admin/analytics)

### 3.1 頁面存取
1. 點擊導航列的「數據分析」連結，或訪問 `http://localhost:3000/admin/analytics`。
2. **預期結果**：成功進入數據分析頁面。

### 3.2 熱門目的地統計
1. 檢查是否顯示「熱門目的地」區塊。
2. **預期結果**：
   - 顯示被查詢次數最多的國家排名。
   - 數據應與資料庫中的測試資料相符（例如日本、法國等）。

### 3.3 對話狀態分佈
1. 檢查是否顯示「對話狀態分佈」區塊。
2. **預期結果**：
   - 顯示各狀態（READY, ASK_COUNTRY 等）的對話數量或比例。

### 3.4 轉換率數據 (選擇性)
1. 若有實作，檢查是否顯示完成規劃的轉換率（READY 狀態數 / 總對話數）。

## 4. 邊界案例測試

1. **搜尋無結果**：
   - 輸入不存在的關鍵字（例如 "XYZ999"）。
   - **預期結果**：列表顯示「查無資料」或類似提示。

2. **無數據分析資料**：
   - 若清空資料庫後訪問分析頁面。
   - **預期結果**：圖表或列表應顯示「尚無數據」或顯示為 0，頁面不應崩潰。

