# Phase 5 測試指南：後台對話管理功能

本階段目標是實作並驗證後台對話列表與詳細頁面。

## 1. 測試環境準備

1. 確保開發伺服器正在執行：
   ```bash
   yarn dev
   ```
2. 確保您已登入後台：
   - 訪問 `http://localhost:3000/admin`
   - 如未登入，請使用 Google 帳號登入

## 2. 驗證對話列表 (/admin/conversations)

### 2.1 頁面存取
1. 點擊側邊欄或導航列中的「對話管理」連結（如果有的話），或直接訪問 `http://localhost:3000/admin/conversations`。
2. **預期結果**：
   - 頁面標題顯示「對話管理」或類似字樣。
   - 顯示對話列表表格。

### 2.2 列表內容
1. 檢查列表欄位是否包含：
   - 使用者 (顯示 Line User ID 或 Display Name)
   - 狀態 (例如：READY, ASK_COUNTRY 等)
   - 目的地 (若有)
   - 更新時間
   - 操作按鈕 (查看詳情)
2. **預期結果**：
   - 資料應依 `updatedAt` 降序排列（最新的在最上面）。
   - 狀態標籤應有不同顏色區分（例如 READY 為綠色）。

### 2.3 分頁功能 (若有實作)
1. 若資料超過一頁，測試分頁按鈕是否有效。

## 3. 驗證對話詳情 (/admin/conversations/[id])

### 3.1 進入詳情頁
1. 在對話列表中，點擊任一筆資料的「查看」按鈕。
2. **預期結果**：導向至 `/admin/conversations/[id]`。

### 3.2 詳情內容顯示
1. **基本資訊**：
   - 確認顯示正確的 User ID 與對話 ID。
   - 確認顯示目前的對話狀態。
2. **旅遊偏好 (Travel Preferences)**：
   - 若該對話已有偏好設定，確認顯示：國家、天數、預算、主題、月份。
   - 若無偏好，應顯示「尚無資料」或類似提示。
3. **推薦結果 (Recommendations)**：
   - 若狀態為 READY 且已有推薦，確認顯示推薦內容。
4. **對話紀錄 (Messages)**：
   - 確認顯示完整的對話時間軸。
   - 確認區分 User 與 Bot 的訊息樣式 (例如 User 在右/左，Bot 在左/右，或用顏色區分)。
   - 確認訊息順序正確（由舊到新或由新到舊）。

## 4. 邊界案例測試

1. **無資料狀態**：
   - 若資料庫無任何對話，列表頁應顯示「尚無對話」提示。
2. **無效 ID**：
   - 嘗試訪問不存在的 ID `http://localhost:3000/admin/conversations/non-existent-id`。
   - **預期結果**：顯示 404 頁面或錯誤提示。

## 5. 錯誤排除

- **資料庫連線錯誤**：檢查終端機是否有 Prisma 連線錯誤。
- **樣式跑版**：檢查 Tailwind CSS class 是否正確套用。

